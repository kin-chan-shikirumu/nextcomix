{
  "version": 3,
  "sources": ["../../javascript/raty.js", "../../javascript/application.js"],
  "sourcesContent": ["class Raty {\r\n    constructor(element, options = {}) {\r\n      this.element = element;\r\n      this.opt = { \r\n        ...this.defaultOptions(), \r\n        ...options, \r\n        ...this._parseOptions(element.dataset) \r\n      };\r\n      this.init();\r\n    }\r\n  \r\n    defaultOptions() {\r\n      return {\r\n        cancelButton: false,\r\n        cancelClass: 'raty-cancel',\r\n        cancelHint: 'Cancel this rating!',\r\n        cancelOff: 'cancel-off.png',\r\n        cancelOn: 'cancel-on.png',\r\n        number: 5,\r\n        readOnly: false,\r\n        score: undefined,\r\n        scoreName: 'comment[rate]',\r\n        starHalf: '/assets/star-half.png',\r\n        starOff: '/assets/star-off.png',\r\n        starOn: '/assets/star-on.png',\r\n        target: \"#comment_rate\",\r\n        targetKeep: true,\r\n      };\r\n    }\r\n  \r\n    init() {\r\n      this._setPath();\r\n      this._createStars();\r\n      this._createScoreField();\r\n  \r\n      if (this.opt.readOnly) {\r\n        this._lock();\r\n      } else {\r\n        this._bindEvents();\r\n      }\r\n  \r\n      this.setScore(this.opt.score);\r\n    }\r\n  \r\n    setScore(score) {\r\n      score = this._adjustScore(score);\r\n      this._apply(score);\r\n      this._setHiddenField(score);\r\n    }\r\n  \r\n    getScore() {\r\n      return this.scoreField ? this.scoreField.value : 0;\r\n    }\r\n  \r\n    _apply(score) {\r\n      this._fillStars(score);\r\n      if (score) {\r\n        this.scoreField.value = score;\r\n      }\r\n    }\r\n  \r\n    _setHiddenField(score) {\r\n      if (this.opt.target) {\r\n        const hiddenField = document.querySelector(this.opt.target);\r\n        if (hiddenField) {\r\n          hiddenField.value = score;\r\n        }\r\n      }\r\n    }\r\n  \r\n    _fillStars(score) {\r\n      this.stars.forEach((star, index) => {\r\n        if (index + 1 <= score) {\r\n          star.src = this.opt.starOn;\r\n        } else if (index < score && index + 0.5 <= score) {\r\n          star.src = this.opt.starHalf;\r\n        } else {\r\n          star.src = this.opt.starOff;\r\n        }\r\n      });\r\n    }\r\n  \r\n    _createStars() {\r\n      this.stars = [];\r\n      for (let i = 1; i <= this.opt.number; i++) {\r\n        const star = document.createElement(\"img\");\r\n        star.src = this.opt.starOff;\r\n        star.dataset.score = i;\r\n        this.element.appendChild(star);\r\n        this.stars.push(star);\r\n      }\r\n    }\r\n  \r\n    _createScoreField() {\r\n      this.scoreField = document.createElement(\"input\");\r\n      this.scoreField.type = \"hidden\";\r\n      this.scoreField.name = this.opt.scoreName;\r\n      this.element.appendChild(this.scoreField);\r\n    }\r\n  \r\n    _bindEvents() {\r\n      this.stars.forEach((star) => {\r\n        star.addEventListener(\"click\", (event) => {\r\n          const score = event.target.dataset.score;\r\n          this.setScore(score);\r\n        });\r\n      });\r\n    }\r\n  \r\n    _lock() {\r\n      this.stars.forEach(star => star.style.pointerEvents = \"none\");\r\n    }\r\n  \r\n    _adjustScore(score) {\r\n      return Math.min(Math.max(parseFloat(score) || 0, 0), this.opt.number);\r\n    }\r\n  \r\n    _setPath() {\r\n      this.opt.path = this.opt.path || '';\r\n    }\r\n  \r\n    _parseOptions(dataset) {\r\n      return Object.keys(dataset).reduce((acc, key) => {\r\n        let value = dataset[key] === \"true\" ? true : dataset[key] === \"false\" ? false : dataset[key];\r\n        if (!isNaN(value) && Number.isInteger(parseFloat(value))) {\r\n          value = Number(value);\r\n        }\r\n        acc[key] = value;\r\n        return acc;\r\n      }, {});\r\n    }\r\n  }\r\n  \r\n  export default Raty;", "import Raty from \"./raty\";\nwindow.Raty = Raty\n"],
  "mappings": "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",
  "names": []
}
